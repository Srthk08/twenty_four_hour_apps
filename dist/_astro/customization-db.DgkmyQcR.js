import{c as l}from"./index.BFAZBQoJ.js";const u="https://lmrrdcaavwwletcjcpqv.supabase.co",p="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxtcnJkY2Fhdnd3bGV0Y2pjcHF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1MDQ0ODgsImV4cCI6MjA3MTA4MDQ4OH0.AU59Qfr6K9i880Gcn5y-3pjCf8PXsDIq4OI0-lPQVuQ",r=l(u,p),d={"restaurant-website":"restaurant-website","streaming-mobile-app":"streaming-mobile-app","android-tv-app":"android-tv-app","restaurant-menu-system":"restaurant-menu-system","order-menu-system":"restaurant-menu-system"};async function m(e,t){try{console.log("üíæ Saving customization form to Supabase...",{formData:e,productType:t});const s={product_type:d[t]||t,product_name:e.productName||e.product_name||"Unknown Product",product_price:e.productPrice||e.product_price||"‚Çπ0",project_name:e.projectName||e.project_name||"",contact_person:e.contactPerson||e.contact_person||"",app_name:e.appName||e.app_name||"",product_description:e.productDescription||e.product_description||"",restaurant_name:e.restaurantName||e.restaurant_name||null,cuisine_type:e.cuisineType||e.cuisine_type||null,logo_url:e.logoUrl||e.logo_url||null,logo_filename:e.logoFilename||e.logo_filename||null,logo_mime_type:e.logoMimeType||e.logo_mime_type||null,logo_size:e.logoSize||e.logo_size||null,contact_email:e.email||e.contact_email||e.contactEmail||"",contact_phone:e.phone||e.contact_phone||e.contactPhone||"",primary_color:e.primaryColor||e.primary_color||"#3B82F6",secondary_color:e.secondaryColor||e.secondary_color||"#10B981",accent_color:e.accentColor||e.accent_color||"#F59E0B",text_color:e.textColor||e.text_color||"#1F2937",additional_requirements:e.additionalRequirements||e.additional_requirements||"",menu_items:e.menuItems||e.menu_items||[],restaurant_address:e.restaurantAddress||e.restaurant_address||null,owner_name:e.ownerName||e.owner_name||null,status:"pending"},{data:i,error:a}=await r.from("customization_forms").select("id").eq("contact_email",s.contact_email).eq("product_type",s.product_type).single();if(i){console.log("‚ö†Ô∏è Duplicate found, updating existing record...");const{data:o,error:n}=await r.from("customization_forms").update(s).eq("id",i.id).select().single();return n?(console.error("‚ùå Error updating customization form:",n),{success:!1,error:n.message,data:null}):(console.log("‚úÖ Customization form updated successfully:",o),{success:!0,error:null,data:o,isUpdate:!0})}else{console.log("‚ûï No duplicate found, creating new record...");const{data:o,error:n}=await r.from("customization_forms").insert([s]).select().single();return n?(console.error("‚ùå Error inserting customization form:",n),{success:!1,error:n.message,data:null}):(console.log("‚úÖ Customization form saved successfully:",o),{success:!0,error:null,data:o,isUpdate:!1})}}catch(c){return console.error("‚ùå Unexpected error saving customization form:",c),{success:!1,error:c.message,data:null}}}export{m as s};
