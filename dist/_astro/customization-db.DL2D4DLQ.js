import{c as i}from"./index.BFAZBQoJ.js";const l="https://lmrrdcaavwwletcjcpqv.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxtcnJkY2Fhdnd3bGV0Y2pjcHF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1MDQ0ODgsImV4cCI6MjA3MTA4MDQ4OH0.AU59Qfr6K9i880Gcn5y-3pjCf8PXsDIq4OI0-lPQVuQ",t=i(l,u),_={"restaurant-website":"restaurant-website","streaming-mobile-app":"streaming-mobile-app","android-tv-app":"android-tv-app","restaurant-menu-system":"restaurant-menu-system","order-menu-system":"restaurant-menu-system"};async function a(e,n){try{if(console.log("üíæ Saving customization form to Supabase...",{formData:e,productType:n}),n==="order-menu-system")return await d(e);const o={product_type:_[n]||n,product_name:e.productName||e.product_name||"Unknown Product",product_price:e.productPrice||e.product_price||"‚Çπ0",project_name:e.projectName||e.project_name||"",contact_person:e.contactPerson||e.contact_person||"",app_name:e.appName||e.app_name||"",product_description:e.productDescription||e.product_description||"",restaurant_name:e.restaurantName||e.restaurant_name||null,cuisine_type:e.cuisineType||e.cuisine_type||null,logo_url:e.logoUrl||e.logo_url||null,logo_filename:e.logoFilename||e.logo_filename||null,logo_mime_type:e.logoMimeType||e.logo_mime_type||null,logo_size:e.logoSize||e.logo_size||null,contact_email:e.email||e.contact_email||e.contactEmail||"",contact_phone:e.phone||e.contact_phone||e.contactPhone||"",primary_color:e.primaryColor||e.primary_color||"#3B82F6",secondary_color:e.secondaryColor||e.secondary_color||"#10B981",accent_color:e.accentColor||e.accent_color||"#F59E0B",text_color:e.textColor||e.text_color||"#1F2937",additional_requirements:e.additionalRequirements||e.additional_requirements||"",menu_items:e.menuItems||e.menu_items||[],restaurant_address:e.restaurantAddress||e.restaurant_address||null,owner_name:e.ownerName||e.owner_name||null,status:"pending"};console.log("üß© Inserting customization form for other products...");const{data:c,error:r}=await t.from("customization_forms").insert(o).select().single();return r?(console.error("‚ùå Error inserting customization form:",r),console.error("‚ùå Error details:",{message:r.message,details:r.details,hint:r.hint,code:r.code}),{success:!1,error:r.message,data:null}):(console.log("‚úÖ Customization form inserted successfully:",c),{success:!0,error:null,data:c})}catch(s){return console.error("‚ùå Unexpected error saving customization form:",s),{success:!1,error:s.message,data:null}}}async function d(e){try{console.log("üíæ Saving OMS customization form to Supabase...",{formData:e});const{data:n,error:s}=await t.rpc("upsert_oms_customization",{p_user_email:e.email||e.contact_email||e.contactEmail||"",p_project_name:e.projectName||e.project_name||"",p_restaurant_name:e.restaurantName||e.restaurant_name||"Default Restaurant",p_owner_name:e.ownerName||e.owner_name||e.contactPerson||e.contact_person||"",p_restaurant_address:e.restaurantAddress||e.restaurant_address||"Not provided",p_contact_person:e.contactPerson||e.contact_person||"",p_phone_number:e.phone||e.contact_phone||e.contactPhone||"",p_user_id:null,p_logo_url:e.logoUrl||e.logo_url||null,p_logo_filename:e.logoFilename||e.logo_filename||null,p_logo_size:e.logoSize||e.logo_size||null,p_menu_categories:e.menuCategories||e.menu_categories||[],p_menu_items:e.menuItems||e.menu_items||[],p_primary_color:e.primaryColor||e.primary_color||"#3B82F6",p_secondary_color:e.secondaryColor||e.secondary_color||"#10B981",p_accent_color:e.accentColor||e.accent_color||"#F59E0B",p_text_color:e.textColor||e.text_color||"#1F2937",p_additional_requirements:e.additionalRequirements||e.additional_requirements||""});if(s)return console.error("‚ùå Error inserting OMS customization:",s),console.error("‚ùå Error details:",{message:s.message,details:s.details,hint:s.hint,code:s.code}),{success:!1,error:s.message,data:null};if(n&&n.length>0){const o=n[0];return console.log("‚úÖ OMS customization result:",o),o.is_duplicate?(console.log("‚ö†Ô∏è Duplicate data detected:",o.message),{success:!0,error:null,data:{id:o.data_id},isUpdate:!1,isDuplicate:!0,message:o.message}):(console.log("‚úÖ OMS customization saved successfully, ID:",o.data_id),{success:!0,error:null,data:{id:o.data_id},isUpdate:!1,isDuplicate:!1,message:o.message})}else return console.error("‚ùå No data returned from OMS function"),{success:!1,error:"No data returned from OMS function",data:null}}catch(n){return console.error("‚ùå Unexpected error saving OMS customization form:",n),{success:!1,error:n.message,data:null}}}export{a as s};
