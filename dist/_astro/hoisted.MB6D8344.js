import"./Toast.astro_astro_type_script_index_0_lang.DSPk3YYf.js";import"https://unpkg.com/@supabase/supabase-js@2";import"./AuthGuard.astro_astro_type_script_index_0_lang.D4Znhmp3.js";class a{constructor(){this.orders=[],this.init()}init(){this.loadOrders(),this.renderOrders()}loadOrders(){const e=localStorage.getItem("user-orders");if(console.log("Raw orders data:",e),e){const o=JSON.parse(e),r=simpleAuth.getCurrentUser();console.log("All orders:",o),console.log("Current user:",r),r?(this.orders=o.filter(t=>t.userId===r.email),console.log("Filtered orders for user:",this.orders)):(this.orders=[],console.log("No current user found"))}else console.log("No orders data found in localStorage")}renderOrders(){const e=document.getElementById("loading-orders"),o=document.getElementById("empty-orders"),r=document.getElementById("orders-list");console.log("Rendering orders. Orders count:",this.orders.length),setTimeout(()=>{if(e?.classList.add("hidden"),this.orders.length===0){console.log("No orders found, showing empty state"),o?.classList.remove("hidden"),r?.classList.add("hidden");return}console.log("Orders found, showing orders list"),o?.classList.add("hidden"),r?.classList.remove("hidden"),this.renderOrdersList()},1e3)}renderOrdersList(){const e=document.getElementById("orders-list");e&&(e.innerHTML="",this.orders.forEach((o,r)=>{const t=this.createOrderElement(o,r);e.appendChild(t)}))}createOrderElement(e,o){const r=document.getElementById("order-template");if(!r)return document.createElement("div");const t=r.cloneNode(!0);t.classList.remove("hidden"),t.id=`order-${o}`,t.querySelector(".order-project-name").textContent=e.projectName||"Custom Project",t.querySelector(".order-project-description").textContent=e.description||"Professional digital solution",t.querySelector(".order-total").textContent=`â‚¹${e.total?.toLocaleString()||"0"}`,t.querySelector(".order-date").textContent=this.formatDate(e.orderDate),t.querySelector(".order-id").textContent=e.orderId||`ORD-${Date.now()}`,t.querySelector(".order-custom-name").textContent=e.requirements?.projectName||"-",t.querySelector(".order-contact-person").textContent=e.requirements?.contactPerson||"-",t.querySelector(".order-restaurant-name").textContent=e.requirements?.restaurantName||"-",t.querySelector(".order-cuisine-type").textContent=e.requirements?.cuisineType||"-",t.querySelector(".order-email").textContent=e.requirements?.email||"-",t.querySelector(".order-phone").textContent=e.requirements?.phone||"-",e.requirements?.primaryColor&&(t.querySelector(".order-primary-color").style.backgroundColor=e.requirements.primaryColor),e.requirements?.secondaryColor&&(t.querySelector(".order-secondary-color").style.backgroundColor=e.requirements.secondaryColor),e.requirements?.accentColor&&(t.querySelector(".order-accent-color").style.backgroundColor=e.requirements.accentColor),e.requirements?.textColor&&(t.querySelector(".order-text-color").style.backgroundColor=e.requirements.textColor);const s=t.querySelector(".order-features");e.features&&e.features.length>0&&(s.innerHTML=e.features.map(d=>`<span class="inline-block bg-primary-100 text-primary-800 text-xs px-2 py-1 rounded-full mr-2 mb-1">${d}</span>`).join(""));const i=t.querySelector(".order-logo-status");e.logo&&(i.innerHTML='<span class="text-green-600">âœ“ Logo uploaded</span>');const l=t.querySelector(".order-additional-requirements");return e.requirements?.additionalRequirements&&(l.textContent=e.requirements.additionalRequirements),t}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}}document.addEventListener("DOMContentLoaded",()=>{new a,new URLSearchParams(window.location.search).get("order")==="success"&&(c(),window.history.replaceState({},document.title,window.location.pathname))});function c(){const n=document.createElement("div");n.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300",n.innerHTML=`
      <div class="flex items-center space-x-2">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
        </svg>
        <span>Order placed successfully! ðŸŽ‰</span>
      </div>
    `,document.body.appendChild(n),setTimeout(()=>{n.remove()},5e3)}
