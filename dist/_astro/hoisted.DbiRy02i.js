import"./Footer.astro_astro_type_script_index_0_lang.BdsyaBYv.js";import"https://unpkg.com/@supabase/supabase-js@2";console.log("Test auth page loaded");function e(t){const n=document.getElementById("console-logs");if(n){const o=document.createElement("p");o.textContent=`[${new Date().toLocaleTimeString()}] ${t}`,n.appendChild(o),n.scrollTop=n.scrollHeight}}function s(){const t=document.getElementById("status-text"),n=document.getElementById("user-info"),o=document.getElementById("session-info"),a=window.globalAuthManager||window.simpleAuthManager;if(a)if(a.isUserLoggedIn()){const d=a.getCurrentUser();t.textContent="✅ Authenticated",n.textContent=d?`${d.email} (${d.full_name||"No name"})`:"User data missing";try{const i=sessionStorage.getItem("simple-auth-session");if(i){const l=JSON.parse(i);o.textContent=`Active (${new Date(l.timestamp).toLocaleString()})`}else o.textContent="No session data"}catch(i){o.textContent="Session error: "+i.message}}else t.textContent="❌ Not authenticated",n.textContent="No user logged in",o.textContent="No active session";else t.textContent="⚠️ Auth manager not available",n.textContent="Manager not loaded",o.textContent="Manager not loaded"}document.getElementById("check-auth-btn")?.addEventListener("click",()=>{e("Checking authentication..."),s(),e("Authentication check complete")});document.getElementById("test-login-btn")?.addEventListener("click",()=>{e("Testing login event...");const t={id:"test-user-123",email:"test@example.com",full_name:"Test User",phone:"123-456-7890",company_name:"Test Company",role:"customer"};window.dispatchEvent(new CustomEvent("user-logged-in",{detail:t})),e("Login event triggered for: "+t.email),setTimeout(()=>{s(),e("Status updated after login event")},100)});document.getElementById("test-logout-btn")?.addEventListener("click",()=>{e("Testing logout event..."),window.dispatchEvent(new CustomEvent("user-logged-out")),e("Logout event triggered"),setTimeout(()=>{s(),e("Status updated after logout event")},100)});document.getElementById("clear-session-btn")?.addEventListener("click",()=>{e("Clearing session..."),sessionStorage.removeItem("simple-auth-session"),e("Session cleared from storage"),s()});document.addEventListener("DOMContentLoaded",()=>{e("Page loaded, checking authentication..."),setTimeout(()=>{s(),e("Initial authentication check complete")},500)});window.addEventListener("user-logged-in",t=>{e("User logged in event received: "+t.detail.email),s()});window.addEventListener("user-logged-out",()=>{e("User logged out event received"),s()});e("Test auth page script initialized");
