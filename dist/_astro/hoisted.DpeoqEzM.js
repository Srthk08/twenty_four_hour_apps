import"./ProductDialog.astro_astro_type_script_index_0_lang.BMBe0S5g.js";import"https://unpkg.com/@supabase/supabase-js@2";document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('a[href^="#"]').forEach(o=>{o.addEventListener("click",function(r){r.preventDefault();const e=this.getAttribute("href").substring(1),t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})})})});const l=document.querySelectorAll(".filter-btn"),n=document.querySelectorAll(".product-card");l.forEach(o=>{o.addEventListener("click",()=>{l.forEach(e=>{e.classList.remove("active"),e.classList.add("bg-white","text-gray-700","border"),e.classList.remove("bg-primary-600","bg-blue-600","text-white"),e.style.color="#374151",e.style.backgroundColor="#ffffff",e.style.background="#ffffff"}),o.classList.add("active"),o.style.color="#3b82f6",o.style.backgroundColor="#ffffff",o.style.background="#ffffff";const r=o.dataset.filter;n.forEach(e=>{const t=e.dataset.category,s=e.dataset.productSlug;let i=!1;r==="all"?i=!0:r==="web"?i=s==="restaurant-website":r==="restaurant"?i=t===r&&s!=="restaurant-website"&&s!=="order-menu-system":r==="order-menu-system"?i=s==="order-menu-system":i=t===r,i?(e.style.display="block",e.classList.add("animate-fade-in")):e.style.display="none"})})});const a=new IntersectionObserver(o=>{o.forEach(r=>{r.isIntersecting&&(r.target.classList.add("animate-fade-in"),a.unobserve(r.target))})},{rootMargin:"100px 0px",threshold:.05});document.querySelectorAll(".product-card").forEach(o=>{a.observe(o)});document.addEventListener("DOMContentLoaded",()=>{document.body.classList.add("page-loaded");const o=document.querySelectorAll(".filter-btn"),r=document.querySelector(".filter-section");r&&(r.style.display="block",r.style.visibility="visible",r.style.opacity="1"),o.forEach(t=>{t.style.display="inline-block",t.style.visibility="visible",t.style.opacity="1",t.classList.contains("active")?(t.style.color="#3b82f6",t.style.backgroundColor="#ffffff",t.style.background="#ffffff"):(t.style.color="#374151",t.style.backgroundColor="#ffffff",t.style.background="#ffffff"),t.classList.remove("bg-primary-600","bg-blue-600","text-white")});const e=document.querySelectorAll('.product-card img[loading="lazy"]');e.length>0&&Array.from(e).slice(0,3).forEach(t=>{t.loading="eager"})});document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".product-view-btn").forEach(r=>{r.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("data-product-slug");if(this.getAttribute("data-product-name"),console.log("Product clicked:",t),t==="order-menu-system"){console.log("OMS product - direct redirect"),window.location.href=`/products/${t}`;return}const s=c();if(console.log("Is admin:",s),s){console.log("Admin user - allowing access"),window.location.href=`/products/${t}`;return}console.log("Non-admin user - showing dialog"),window.showProductDialog?window.showProductDialog():(console.log("Dialog not available - redirecting to contact"),window.location.href="/contact")})})});function c(){try{if(window.globalAuthManager&&window.globalAuthManager.isUserLoggedIn()){const e=window.globalAuthManager.getCurrentUser();if(e&&e.role==="admin")return!0}if(window.simpleAuthManager&&window.simpleAuthManager.isUserLoggedIn()){const e=window.simpleAuthManager.getCurrentUser();if(e&&e.role==="admin")return!0}const o=sessionStorage.getItem("simple-auth-session");if(o)try{const e=JSON.parse(o);if(e.user&&e.user.role==="admin")return!0}catch(e){console.log("Session data parse error:",e)}const r=localStorage.getItem("simple-auth-session");if(r)try{const e=JSON.parse(r);if(e.user&&e.user.role==="admin")return!0}catch(e){console.log("Local session data parse error:",e)}return!1}catch(o){return console.error("Error checking admin status:",o),!1}}
