import{supabase as s}from"./supabase.Bj7MEfmu.js";import"./Toast.astro_astro_type_script_index_0_lang.D91WvFkz.js";import"https://unpkg.com/@supabase/supabase-js@2";import"./index.BymsOcZI.js";import"./preload-helper.CLcXU_4U.js";document.getElementById("test-profiles")?.addEventListener("click",async()=>{try{console.log("üîç Testing profiles table...");const{data:e,error:r}=await s.from("profiles").select("*").limit(10);if(r)throw r;console.log("‚úÖ Profiles data:",e);const t=document.getElementById("profiles-result"),o=document.getElementById("profiles-data");t&&o&&(o.textContent=JSON.stringify(e,null,2),t.classList.remove("hidden"))}catch(e){console.error("‚ùå Error testing profiles:",e),alert("Error testing profiles: "+e.message)}});document.getElementById("test-current-user")?.addEventListener("click",async()=>{try{console.log("üîç Testing current user...");const{data:{user:e},error:r}=await s.auth.getUser();if(r)throw r;console.log("‚úÖ Current user:",e);const t=document.getElementById("user-result"),o=document.getElementById("user-data");t&&o&&(o.textContent=JSON.stringify(e,null,2),t.classList.remove("hidden"))}catch(e){console.error("‚ùå Error testing current user:",e),alert("Error testing current user: "+e.message)}});document.getElementById("test-admin-access")?.addEventListener("click",async()=>{try{console.log("üîç Testing admin access...");const{data:{user:e},error:r}=await s.auth.getUser();if(r)throw r;if(!e)throw new Error("No user logged in");console.log("‚úÖ User found:",e);const{data:t,error:o}=await s.from("profiles").select("*").eq("id",e.id).single();if(o)throw o;console.log("‚úÖ Profile found:",t);const n=t.role==="admin"||t.role==="developer"||t.role==="support",i={user:e,profile:t,isAdmin:n,canAccessAdmin:n,redirectUrl:n?"/admin":"/dashboard"};console.log("‚úÖ Admin access result:",i);const l=document.getElementById("admin-result"),a=document.getElementById("admin-data");l&&a&&(a.textContent=JSON.stringify(i,null,2),l.classList.remove("hidden"))}catch(e){console.error("‚ùå Error testing admin access:",e),alert("Error testing admin access: "+e.message)}});
