async function e(){const t=document.getElementById("auth-guard");if(!t)return;const n=t.dataset.redirectTo||"/login";try{let o=window.globalAuthManager||window.simpleAuthManager;if(!o){setTimeout(e,50);return}if(o.isUserLoggedIn()){console.log("✅ User is authenticated, allowing access");return}else{if(console.log("❌ User not authenticated, redirecting to:",n),window.location.pathname==="/login"){console.log("Already on login page, not redirecting");return}window.location.pathname!=="/login"&&sessionStorage.setItem("login-redirect-url",window.location.pathname+window.location.search),window.location.href=n;return}}catch(o){console.error("Error checking authentication:",o),window.location.pathname!=="/login"&&(window.location.href=n)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{e(),setTimeout(e,100)}):(e(),setTimeout(e,100));window.addEventListener("user-logged-in",()=>{console.log("User logged in event received in AuthGuard")});window.addEventListener("user-logged-out",()=>{console.log("User logged out event received in AuthGuard"),e()});console.log("✅ AuthGuard initialized with global auth manager");
