import{c as u}from"./index.BFAZBQoJ.js";import"./Toast.astro_astro_type_script_index_0_lang.C2kRdsNU.js";import"https://unpkg.com/@supabase/supabase-js@2";const i="https://lmrrdcaavwwletcjcpqv.supabase.co",d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxtcnJkY2Fhdnd3bGV0Y2pjcHF2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1MDQ0ODgsImV4cCI6MjA3MTA4MDQ4OH0.AU59Qfr6K9i880Gcn5y-3pjCf8PXsDIq4OI0-lPQVuQ",l=u(i,d);function n(o,e="info"){const s=document.getElementById("status"),t=document.getElementById("status-text");s&&t&&(t.textContent=o,s.className=`mb-6 p-4 rounded-lg ${e==="error"?"bg-red-100 text-red-800":e==="success"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,s.classList.remove("hidden"))}function c(o){const e=document.getElementById("debug-content");e&&(e.innerHTML=`
        <pre class="text-xs overflow-x-auto">${JSON.stringify(o,null,2)}</pre>
      `)}async function g(){try{n("Testing Google authentication...","info");const{data:o,error:e}=await l.auth.getSession();if(c({timestamp:new Date().toISOString(),supabaseUrl:i,currentOrigin:window.location.origin,expectedRedirect:`${window.location.origin}/auth/callback`,supabaseHealth:e?"Error":"OK",healthError:e?.message||null}),e){n(`Supabase connection error: ${e.message}`,"error");return}n("Supabase connected. Testing Google OAuth...","info");const{data:s,error:t}=await l.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(t){console.error("Google OAuth Error:",t);let r="Unknown error",a="Check the debug information below.";t.message.includes("Provider not found")||t.message.includes("not configured")?(r="Google provider is not configured in Supabase",a="Go to Supabase Dashboard → Authentication → Providers → Enable Google"):t.message.includes("redirect_uri_mismatch")?(r="Redirect URI mismatch in Google Cloud Console",a=`Add this exact URI to Google Cloud Console: ${window.location.origin}/auth/callback`):t.message.includes("invalid_client")&&(r="Invalid Google Client ID or Secret",a="Check your Google Cloud Console credentials in Supabase"),n(`❌ ${r}`,"error"),c({timestamp:new Date().toISOString(),error:t.message,diagnosis:r,solution:a,supabaseUrl:i,redirectUri:`${window.location.origin}/auth/callback`,expectedSupabaseRedirect:`${i}/auth/v1/callback`});return}n("✅ Google OAuth initiated successfully! You should be redirected to Google.","success")}catch(o){console.error("Test error:",o),n(`Test failed: ${o.message}`,"error"),c({timestamp:new Date().toISOString(),error:o.message,stack:o.stack})}}document.getElementById("test-google-btn")?.addEventListener("click",g);c({timestamp:new Date().toISOString(),currentUrl:window.location.href,supabaseUrl:i,redirectUri:`${window.location.origin}/auth/callback`,userAgent:navigator.userAgent});
