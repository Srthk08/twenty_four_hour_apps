const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/supabase.DO6XXPT9.js","_astro/index.BFAZBQoJ.js"])))=>i.map(i=>d[i]);
import{_ as x}from"./index.BFAZBQoJ.js";import{s as S}from"./customization-db.DgkmyQcR.js";import"./Toast.astro_astro_type_script_index_0_lang.C2kRdsNU.js";import"https://unpkg.com/@supabase/supabase-js@2";import"./AuthGuard.astro_astro_type_script_index_0_lang.D4Znhmp3.js";console.log("Dashboard loaded - using global auth manager");async function L(e){try{console.log("🔍 Fetching user profile from Supabase for user:",e);const{supabase:i}=await x(async()=>{const{supabase:o}=await import("./supabase.DO6XXPT9.js");return{supabase:o}},__vite__mapDeps([0,1])),{data:r,error:d}=await i.from("profiles").select("*").eq("id",e).single();return d?(console.error("Error fetching user profile:",d),null):(console.log("✅ User profile fetched from Supabase:",r),r)}catch(i){return console.error("Error in fetchUserProfile:",i),null}}async function y(){console.log("🔄 Updating user info...");let e=null,i="";const r=[{key:"simple-auth-session",storage:sessionStorage,path:"user"},{key:"simple-auth-user",storage:localStorage,path:null},{key:"simple-auth-session",storage:localStorage,path:"user"}];for(const o of r)try{const m=o.storage.getItem(o.key);if(m){const l=JSON.parse(m);if(e=o.path?l[o.path]:l,e&&e.email){i=o.key,console.log(`✅ Found user data in ${o.key}:`,e.email);break}}}catch(m){console.log(`Error reading ${o.key}:`,m)}if(!e){console.log("No stored user data found, checking URL...");const o=new URLSearchParams(window.location.search),m=o.get("email")||"user@example.com",l=o.get("name")||"User";e={email:m,full_name:l,phone:"Not set",company_name:"Not set"},i="URL parameters",console.log("Using fallback data:",e)}if(e){if(e.user_metadata&&(e.full_name=e.user_metadata.full_name||e.full_name,e.phone=e.user_metadata.phone||e.phone,e.company_name=e.user_metadata.company_name||e.company_name),e.id&&(!e.full_name||e.full_name==="User"||!e.phone||e.phone==="Not set")){console.log("🔄 Incomplete user data, fetching from Supabase...");try{const o=await L(e.id);o&&(e={...e,...o,email:e.email||o.email},console.log("✅ Enhanced user data with profile:",e))}catch(o){console.log("Error fetching profile data:",o)}}e.full_name=e.full_name||e.fullName||"User",e.phone=e.phone||"Not set",e.company_name=e.company_name||e.companyName||"Not set",e.email=e.email||"user@example.com",console.log("📋 Final normalized user data:",e)}const d=document.getElementById("user-welcome");if(d){const o=e.full_name||e.fullName||e.email?.split("@")[0]||"User";d.textContent=o,console.log("👋 Welcome message updated to:",o)}console.log(`✅ Dashboard updated successfully from ${i}`),setTimeout(()=>{console.log("🔄 Force update welcome message...");const o=document.getElementById("user-welcome");if(o){const m=e.full_name||e.fullName||e.email?.split("@")[0]||"User";o.textContent=m,console.log("Force updated welcome to:",o.textContent)}},100)}function C(){const e=new URLSearchParams(window.location.search),i=e.get("product"),r=e.get("price");if(console.log("🔍 Checking for product selection:",{productId:i,price:r}),i&&r){console.log("✅ Product selected, showing customization form");const o=[{id:"1",name:"Restaurant Menu System",description:"Digital menu system with QR code integration, online ordering, and real-time updates. Perfect for restaurants looking to modernize their customer experience.",price:25e3,type:"restaurant"},{id:"2",name:"Android TV App",description:"Custom Android TV applications with beautiful UI, content management, and remote control support. Perfect for streaming services and media companies.",price:55e3,type:"non-restaurant"},{id:"3",name:"Streaming Mobile App",description:"Mobile streaming applications for iOS and Android with custom features, user authentication, and content management.",price:35e3,type:"non-restaurant"},{id:"4",name:"Restaurant Website",description:"Professional restaurant website with online ordering, menu display, and customer management features.",price:2e4,type:"restaurant"},{id:"5",name:"Order Menu System",description:"Complete order management system with digital menu integration, real-time order tracking, and payment processing. Perfect for restaurants looking to streamline their ordering process.",price:25e3,type:"order-menu"}].find(m=>m.id===i);if(o){const m=document.getElementById("product-customization-form"),l=document.getElementById("order-menu-customization-form"),u=document.getElementById("recent-activity");m&&!m.classList.contains("hidden")&&(m.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",m.style.opacity="0",m.style.transform="translateY(-10px)",setTimeout(()=>m.classList.add("hidden"),300)),l&&!l.classList.contains("hidden")&&(l.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",l.style.opacity="0",l.style.transform="translateY(-10px)",setTimeout(()=>l.classList.add("hidden"),300)),u&&!u.classList.contains("hidden")&&(u.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",u.style.opacity="0",u.style.transform="translateY(-10px)",setTimeout(()=>u.classList.add("hidden"),300)),setTimeout(()=>{if(o.type==="order-menu"){document.getElementById("order-menu-product-name").textContent=o.name,document.getElementById("order-menu-product-price").textContent=`₹${parseInt(r).toLocaleString()}`;const t=document.getElementById("order-menu-customization-form");t.classList.remove("hidden"),t.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",t.style.opacity="0",t.style.transform="translateY(10px)",setTimeout(()=>{t.style.opacity="1",t.style.transform="translateY(0)"},50)}else{document.getElementById("selected-product-name").textContent=o.name,document.getElementById("selected-product-price").textContent=`₹${parseInt(r).toLocaleString()}`;const t=document.getElementById("cuisine-type-field"),s=document.getElementById("restaurant-name-field");o.type==="restaurant"?(t.classList.remove("hidden"),t.querySelector("select").required=!0,s.classList.remove("hidden"),s.querySelector("input").required=!0):(t.classList.add("hidden"),t.querySelector("select").required=!1,s.classList.add("hidden"),s.querySelector("input").required=!1);const a=document.getElementById("product-customization-form");a.classList.remove("hidden"),a.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",a.style.opacity="0",a.style.transform="translateY(10px)",setTimeout(()=>{a.style.opacity="1",a.style.transform="translateY(0)"},50)}},350),setTimeout(()=>h(),500)}}}function q(){const e=document.getElementById("order-menu-form"),i=document.getElementById("close-order-menu-form"),r=document.getElementById("cancel-order-menu"),d=document.getElementById("order-menu-logo-upload"),o=document.querySelector("#order-menu-customization-form .border-dashed"),m=document.getElementById("add-menu-item"),l=document.getElementById("menu-items-container");o?.addEventListener("click",()=>{d?.click()}),d?.addEventListener("change",s=>{const a=s.target.files[0];if(a){const n=a.name,c=(a.size/1024/1024).toFixed(2);o.innerHTML=`
          <div class="flex flex-col items-center">
            <svg class="w-12 h-12 text-green-500 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <p class="text-green-600 mb-1 font-medium">Logo uploaded successfully</p>
            <p class="text-sm text-gray-500">${n} (${c} MB)</p>
          </div>
        `}});function u(){const s=e?.querySelectorAll('input[type="color"]'),a=e?.querySelectorAll('input[name$="ColorText"]');s?.forEach((n,c)=>{const p=a?.[c];p&&(n.addEventListener("input",()=>{p.value=n.value}),p.addEventListener("input",()=>{/^#[0-9A-F]{6}$/i.test(p.value)&&(n.value=p.value)}))})}u();let t=1;m?.addEventListener("click",()=>{const s=document.createElement("div");s.className="menu-item-row grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 p-4 border border-gray-200 rounded-lg",s.innerHTML=`
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Item Name</label>
          <input type="text" name="menuItems[${t}][item_name]" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500" placeholder="e.g., Margherita Pizza" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Price (₹)</label>
          <input type="number" name="menuItems[${t}][price]" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500" placeholder="299" step="0.01" required>
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
          <select name="menuItems[${t}][item_category]" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500" required>
            <option value="">Select Category</option>
            <option value="appetizers">Appetizers</option>
            <option value="main-course">Main Course</option>
            <option value="desserts">Desserts</option>
            <option value="beverages">Beverages</option>
            <option value="sides">Sides</option>
          </select>
        </div>
        <div class="flex items-end">
          <button type="button" class="remove-menu-item px-3 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 text-sm">
            Remove
          </button>
        </div>
      `,l?.appendChild(s),t++}),l?.addEventListener("click",s=>{s.target.classList.contains("remove-menu-item")&&s.target.closest(".menu-item-row").remove()}),i?.addEventListener("click",()=>{v(),window.history.replaceState({},document.title,window.location.pathname)}),r?.addEventListener("click",()=>{v(),window.history.replaceState({},document.title,window.location.pathname)}),e?.addEventListener("submit",async s=>{s.preventDefault();const a=new FormData(e),n=Object.fromEntries(a);console.log("📝 Order Menu requirements saved:",n);const c={productId:"5",productName:"Order Menu System",productDescription:"Complete order management system with digital menu integration, real-time order tracking, and payment processing. Perfect for restaurants looking to streamline their ordering process.",productPrice:"₹25,000",projectName:n.projectName,restaurantName:n.restaurantName,ownerName:n.ownerName,restaurantAddress:n.restaurantAddress,contactPerson:n.contactPerson,email:n.email,phone:n.phone,additionalRequirements:n.additionalRequirements,restaurantLogo:n.restaurantLogo,primaryColor:n.primaryColor,secondaryColor:n.secondaryColor,accentColor:n.accentColor,textColor:n.textColor,menuItems:Array.from(document.querySelectorAll(".menu-item-row")).map((p,g)=>({item_name:p.querySelector(`input[name="menuItems[${g}][item_name]"]`)?.value||"",price:p.querySelector(`input[name="menuItems[${g}][price]"]`)?.value||"",item_category:p.querySelector(`select[name="menuItems[${g}][item_category]"]`)?.value||""})).filter(p=>p.item_name),timestamp:new Date().toISOString()};try{console.log("💾 Saving Order Menu System form to database...");const p={projectName:c.projectName,contactPerson:c.contactPerson,appName:c.appName,productDescription:c.productDescription,restaurantName:c.restaurantName,cuisineType:c.cuisineType,email:c.email,phone:c.phone,primaryColor:c.primaryColor,secondaryColor:c.secondaryColor,accentColor:c.accentColor,textColor:c.textColor,additionalRequirements:c.additionalRequirements,menuItems:c.menuItems||[],restaurantAddress:c.restaurantAddress,ownerName:c.ownerName,logoUrl:c.logoUrl,logoFilename:c.logoFilename,logoMimeType:c.logoMimeType,logoSize:c.logoSize},g=await S(p,"restaurant-menu-system");if(g.success){console.log("✅ Order Menu System form saved to database:",g.data);const f=JSON.parse(localStorage.getItem("order-menu-requirements")||"[]");f.push(c),localStorage.setItem("order-menu-requirements",JSON.stringify(f)),alert("Order Menu requirements saved successfully! Our team will contact you soon.")}else{console.error("❌ Error saving to database:",g.error);const f=JSON.parse(localStorage.getItem("order-menu-requirements")||"[]");f.push(c),localStorage.setItem("order-menu-requirements",JSON.stringify(f)),alert("Order Menu requirements saved locally! Our team will contact you soon.")}window.history.replaceState({},document.title,window.location.pathname),v(),e.reset()}catch(p){console.error("Error saving order menu requirements:",p),alert("Error saving order menu requirements. Please try again.")}})}function N(){const e=document.getElementById("customization-form"),i=document.getElementById("close-customization-form"),r=document.getElementById("cancel-customization"),d=document.getElementById("restaurant-logo-upload"),o=document.querySelector("#product-customization-form .border-dashed");o?.addEventListener("click",()=>{d?.click()}),d?.addEventListener("change",l=>{const u=l.target.files[0];if(u){const t=u.name,s=(u.size/1024/1024).toFixed(2);o.innerHTML=`
          <div class="flex flex-col items-center">
            <svg class="w-12 h-12 text-green-500 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <p class="text-green-600 mb-1 font-medium">Logo uploaded successfully</p>
            <p class="text-sm text-gray-500">${t} (${s} MB)</p>
          </div>
        `}});function m(){const l=e?.querySelectorAll('input[type="color"]'),u=e?.querySelectorAll('input[name$="ColorText"]');l?.forEach((t,s)=>{const a=u?.[s];a&&(t.addEventListener("input",()=>{a.value=t.value}),a.addEventListener("input",()=>{/^#[0-9A-F]{6}$/i.test(a.value)&&(t.value=a.value)}))})}m(),i?.addEventListener("click",()=>{v(),window.history.replaceState({},document.title,window.location.pathname)}),r?.addEventListener("click",()=>{v(),window.history.replaceState({},document.title,window.location.pathname)}),e?.addEventListener("submit",async l=>{l.preventDefault();const u=new FormData(e),t=Object.fromEntries(u);console.log("📝 Project requirements saved:",t);const s=document.getElementById("selected-product-name").textContent,a=document.getElementById("selected-product-price").textContent,n={productId:new URLSearchParams(window.location.search).get("product")||"1",productName:s,productPrice:a,projectName:t.projectName,appName:t.appName,contactPerson:t.contactPerson,productDescriptionCustom:t.productDescription,email:t.email,phone:t.phone,additionalRequirements:t.additionalRequirements,restaurantLogo:t.restaurantLogo,primaryColor:t.primaryColor,secondaryColor:t.secondaryColor,accentColor:t.accentColor,textColor:t.textColor,timestamp:new Date().toISOString()},c=new URLSearchParams(window.location.search).get("product")||"1";["3","4"].includes(c)&&(n.restaurantName=t.restaurantName,n.cuisineType=t.cuisineType);try{console.log("💾 Saving project form to database...");const f={1:"restaurant-website",2:"streaming-mobile-app",3:"android-tv-app",4:"restaurant-menu-system"}[c]||"restaurant-website",I={projectName:n.projectName,contactPerson:n.contactPerson,appName:n.appName,productDescription:n.productDescriptionCustom,restaurantName:n.restaurantName,cuisineType:n.cuisineType,email:n.email,phone:n.phone,primaryColor:n.primaryColor,secondaryColor:n.secondaryColor,accentColor:n.accentColor,textColor:n.textColor,additionalRequirements:n.additionalRequirements,logoUrl:n.logoUrl,logoFilename:n.logoFilename,logoMimeType:n.logoMimeType,logoSize:n.logoSize},w=await S(I,f);if(w.success){console.log("✅ Project form saved to database:",w.data);const b=JSON.parse(localStorage.getItem("project-requirements")||"[]");b.push(n),localStorage.setItem("project-requirements",JSON.stringify(b)),alert("Project requirements saved successfully! Our team will contact you soon.")}else{console.error("❌ Error saving to database:",w.error);const b=JSON.parse(localStorage.getItem("project-requirements")||"[]");b.push(n),localStorage.setItem("project-requirements",JSON.stringify(b)),alert("Project requirements saved locally! Our team will contact you soon.")}window.history.replaceState({},document.title,window.location.pathname),v(),e.reset(),o&&(o.innerHTML=`
            <div class="flex flex-col items-center">
              <svg class="w-12 h-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
              </svg>
              <p class="text-gray-600 mb-2">Click to upload restaurant logo</p>
              <p class="text-sm text-gray-500">PNG, JPG, SVG up to 10MB</p>
            </div>
          `)}catch(g){console.error("Error saving requirements:",g),alert("Error saving project requirements. Please try again.")}})}function v(){const e=document.getElementById("product-customization-form"),i=document.getElementById("order-menu-customization-form"),r=document.getElementById("recent-activity");e&&!e.classList.contains("hidden")&&(e.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",e.style.opacity="0",e.style.transform="translateY(-10px)",setTimeout(()=>e.classList.add("hidden"),300)),i&&!i.classList.contains("hidden")&&(i.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",i.style.opacity="0",i.style.transform="translateY(-10px)",setTimeout(()=>i.classList.add("hidden"),300)),setTimeout(()=>{r&&(r.style.display="block",r.classList.remove("hidden"),r.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",r.style.opacity="0",r.style.transform="translateY(10px)",setTimeout(()=>{r.style.opacity="1",r.style.transform="translateY(0)"},50))},350)}function h(){console.log("🔄 Attempting to auto-fill user details...");const e=()=>{const i=window.globalAuthManager||window.simpleAuthManager;if(i&&i.isUserLoggedIn()){const r=i.getCurrentUser();return console.log("👤 Current user from auth manager:",r),r&&r.email&&(console.log("📧 Auto-filling email:",r.email),document.querySelectorAll('input[name="email"], input[type="email"]').forEach(o=>{o.value=r.email,o.dispatchEvent(new Event("input",{bubbles:!0})),o.dispatchEvent(new Event("change",{bubbles:!0})),console.log("✅ Filled email field:",o)})),r&&r.phone&&(console.log("📱 Auto-filling phone:",r.phone),document.querySelectorAll('input[name="phone"], input[type="tel"]').forEach(o=>{o.value=r.phone,o.dispatchEvent(new Event("input",{bubbles:!0})),o.dispatchEvent(new Event("change",{bubbles:!0})),console.log("✅ Filled phone field:",o)})),r&&r.full_name&&(console.log("👤 Auto-filling contact person:",r.full_name),document.querySelectorAll('input[name="contactPerson"]').forEach(o=>{o.value=r.full_name,o.dispatchEvent(new Event("input",{bubbles:!0})),o.dispatchEvent(new Event("change",{bubbles:!0})),console.log("✅ Filled contact person field:",o)})),console.log("✅ Auto-fill completed with auth manager data"),!0}return!1};if(!e()){let i=0;const r=50,d=setInterval(()=>{if(i++,(e()||i>=r)&&(clearInterval(d),i>=r)){console.log("⏰ Auth manager timeout, trying fallback methods...");const o=sessionStorage.getItem("simple-auth-session");if(o)try{const l=JSON.parse(o).user;l&&l.email&&document.querySelectorAll('input[name="email"], input[type="email"]').forEach(t=>{t.value=l.email,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0}))}),l&&l.phone&&document.querySelectorAll('input[name="phone"], input[type="tel"]').forEach(t=>{t.value=l.phone,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0}))}),l&&l.full_name&&document.querySelectorAll('input[name="contactPerson"]').forEach(t=>{t.value=l.full_name,t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0}))}),console.log("✅ Auto-fill completed with session storage fallback")}catch(m){console.error("❌ Error parsing session data:",m)}}},100)}}document.addEventListener("DOMContentLoaded",()=>{console.log("Dashboard DOM loaded - initializing with global auth manager");const e=new URLSearchParams(window.location.search),i=e.get("product"),r=e.get("price"),d=document.getElementById("recent-activity");if(!i||!r?d&&(d.style.display="block",console.log("✅ Showing browse products section - no product selected")):d&&(d.style.display="none",console.log("✅ Hiding browse products section - product selected")),document.body.style.transition="opacity 0.3s ease-in-out",document.body.style.opacity="0",setTimeout(()=>{document.body.style.opacity="1"},50),i&&r){const t=[{id:"1",name:"Restaurant Menu System",description:"Digital menu system with QR code integration, online ordering, and real-time updates. Perfect for restaurants looking to modernize their customer experience.",price:25e3,type:"restaurant"},{id:"2",name:"Android TV App",description:"Custom Android TV applications with beautiful UI, content management, and remote control support. Perfect for streaming services and media companies.",price:55e3,type:"non-restaurant"},{id:"3",name:"Streaming Mobile App",description:"Mobile streaming applications for iOS and Android with custom features, user authentication, and content management.",price:35e3,type:"non-restaurant"},{id:"4",name:"Restaurant Website",description:"Professional restaurant website with online ordering, menu display, and customer management features.",price:2e4,type:"restaurant"},{id:"5",name:"Order Menu System",description:"Complete order management system with digital menu integration, real-time order tracking, and payment processing. Perfect for restaurants looking to streamline their ordering process.",price:25e3,type:"order-menu"}].find(s=>s.id===i);if(t){document.getElementById("selected-product-name").textContent=t.name,document.getElementById("selected-product-price").textContent=`₹${t.price.toLocaleString()}`,document.getElementById("order-menu-product-name").textContent=t.name,document.getElementById("order-menu-product-price").textContent=`₹${t.price.toLocaleString()}`;const s=document.getElementById("recent-activity"),a=document.getElementById("product-customization-form"),n=document.getElementById("order-menu-customization-form");s&&(s.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",s.style.opacity="0",s.style.transform="translateY(-10px)",setTimeout(()=>{s.classList.add("hidden")},300)),setTimeout(()=>{if(t.type==="order-menu")n&&(n.classList.remove("hidden"),n.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",n.style.opacity="0",n.style.transform="translateY(10px)",setTimeout(()=>{n.style.opacity="1",n.style.transform="translateY(0)"},50));else{a&&(a.classList.remove("hidden"),a.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",a.style.opacity="0",a.style.transform="translateY(10px)",setTimeout(()=>{a.style.opacity="1",a.style.transform="translateY(0)"},50));const c=document.getElementById("cuisine-type-field"),p=document.getElementById("restaurant-name-field");t.type==="restaurant"?(c.classList.remove("hidden"),c.querySelector("select").setAttribute("required","required"),p.classList.remove("hidden"),p.querySelector("input").setAttribute("required","required")):(c.classList.add("hidden"),c.querySelector("select").removeAttribute("required"),p.classList.add("hidden"),p.querySelector("input").removeAttribute("required"))}},300),setTimeout(()=>h(),500)}}C(),N(),q(),h(),setTimeout(()=>h(),1e3),setTimeout(()=>h(),2e3);const o=new MutationObserver(u=>{u.forEach(t=>{if(t.type==="attributes"&&t.attributeName==="class"){const s=t.target;(s.id==="product-customization-form"||s.id==="order-menu-customization-form")&&(s.classList.contains("hidden")||(console.log("👁️ Form became visible, auto-filling..."),setTimeout(()=>h(),100)))}})}),m=document.getElementById("product-customization-form"),l=document.getElementById("order-menu-customization-form");m&&o.observe(m,{attributes:!0,attributeFilter:["class"]}),l&&o.observe(l,{attributes:!0,attributeFilter:["class"]}),y(),setTimeout(()=>y(),100),setTimeout(()=>y(),500),setTimeout(()=>y(),1e3),setTimeout(()=>y(),2e3),setTimeout(()=>{const u=new URLSearchParams(window.location.search),t=u.get("product"),s=u.get("price"),a=document.getElementById("recent-activity");!t||!s?a&&(a.style.display="block",a.classList.remove("hidden"),console.log("✅ Browse products section confirmed visible - no product selected")):a&&(a.style.display="none",console.log("✅ Browse products section confirmed hidden - product selected"))},1e3)});window.addEventListener("load",()=>{console.log("Window loaded - trying again"),y()});let E=0;const P=5,B=setInterval(()=>{E++,console.log(`Attempt ${E} to load user data...`),y(),E>=P&&(clearInterval(B),console.log("Max attempts reached"))},2e3);window.addEventListener("user-logged-in",()=>{console.log("User logged in event received in dashboard"),y()});window.addEventListener("user-logged-out",()=>{console.log("User logged out event received in dashboard"),y()});console.log("✅ Dashboard script initialized with global auth manager");
