import"./ProductDialog.astro_astro_type_script_index_0_lang.C4tfig-4.js";import"https://unpkg.com/@supabase/supabase-js@2";document.querySelectorAll(".faq-button").forEach(e=>{e.addEventListener("click",()=>{const t=e.nextElementSibling,o=e.querySelector("svg");t.classList.toggle("hidden"),o.classList.toggle("rotate-180")})});window.redirectToCart=function(e,t){console.log("🛒 redirectToCart called with:",{productId:e,price:t});const o=window.globalAuthManager||window.simpleAuthManager;if(console.log("🔍 Auth manager found:",!!o),o&&o.isUserLoggedIn()){console.log("✅ User authenticated, redirecting to dashboard");const n=`/dashboard?product=${e}&price=${t}`;console.log("🔗 Redirecting to:",n),window.location.href=n}else{console.log("❌ User not authenticated, redirecting to login");const n=`/login?redirect=/dashboard?product=${e}&price=${t}`;console.log("🔗 Redirecting to:",n),window.location.href=n}};function s(){console.log("Checking authentication status...");const e=()=>{const t=window.globalAuthManager||window.simpleAuthManager;if(t)if(console.log("✅ Auth manager found, checking status..."),t.isUserLoggedIn()){console.log("✅ User is authenticated, hiding login prompt");const o=document.getElementById("login-prompt");o&&(o.classList.add("hidden"),console.log("Login prompt hidden"));const n=document.getElementById("add-to-cart-btn");n&&(n.classList.remove("hidden"),console.log("Add to cart button shown"))}else{console.log("❌ User is not authenticated, showing login prompt");const o=document.getElementById("login-prompt");o&&(o.classList.remove("hidden"),console.log("Login prompt shown"));const n=document.getElementById("add-to-cart-btn");n&&(n.classList.add("hidden"),console.log("Add to cart button hidden"))}else console.log("⏳ Auth manager not ready, retrying..."),setTimeout(e,100)};e()}document.addEventListener("DOMContentLoaded",s);document.addEventListener("DOMContentLoaded",function(){const t=window.location.pathname.split("/").pop();!i()&&t!=="order-menu-system"&&(window.showProductDialog&&window.showProductDialog(),setTimeout(()=>{window.location.href="/products"},3e3))});function i(){try{if(window.simpleAuthManager&&window.simpleAuthManager.isUserLoggedIn()){const t=window.simpleAuthManager.getCurrentUser();if(t&&t.role==="admin")return!0}const e=sessionStorage.getItem("simple-auth-session");if(e){const t=JSON.parse(e);if(t.user&&t.user.role==="admin")return!0}return!1}catch(e){return console.error("Error checking admin status:",e),!1}}window.addEventListener("user-logged-in",e=>{console.log("✅ User logged in event received, updating UI..."),s()});window.addEventListener("user-logged-out",()=>{console.log("❌ User logged out event received, updating UI..."),s()});const r=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&t.target.classList.add("animate-fade-in")})});document.querySelectorAll(".animate-fade-in").forEach(e=>{r.observe(e)});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".contact-us-btn").forEach(t=>{t.addEventListener("mouseenter",function(){this.style.color="#000000",this.style.backgroundColor="white"}),t.addEventListener("mouseleave",function(){this.style.color="white",this.style.backgroundColor="transparent"})})});
